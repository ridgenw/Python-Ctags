import os
import shutil
import urllib
from os import system


def Git_Repo(file):

    for root, dir, files in os.walk("/usr/local"):
        if "ctags" in files == False: #can find universal ctags downlaoded on device
             system("git clone https://github.com/universal-ctags/ctags.git \n cd ctags \n ./autogen.sh \n ./configure \n make \n sudo make install")
        else:
            print('"ctags" file was previously found.')
            break
           

    # downlaod gitpython
    try:
        os.system("pip3 install GitPython")
        import git
        print("Downloaded GitPython with pip3")
    except:
        try:
            os.system("pip install GitPython")
            import git
            print("Downloaded GitPython with pip")
        except:
            print("Error downloading GitPython... try downloading with your command-line. ")
    # clone git repo
    os.system("cd ..") 
    python_dir = os.getcwd() 
    print(python_dir)
    # moves into python dir
    #contents = open("File List.yaml", "w+")
    try:
        git.Repo.clone_from(file, python_dir + "/pyrepo")
    except:
        print("Did not download git repo")
    # get cwd, cd into Python

   # try:
    #    os.chdir("pyrepo")
     #   print(os.getcwd())
    #except:
     #   print("Error changing into PyRepo")


    # delete git temp
    #try:
     #   os.system("rm -rf .git")
      #  print(".git has been temporarily deleted. ")
    #except:
     #   print("Error deleting .git")

    # create the tags file
    try:
        system("uctags -R -f tags . pyrepo")
        print('tags file created successfully')
        #contents.write("tags file was created successfully. \n")
    except:
        print("There was an error with ctags")
        try:
            print('You might need to check if you have uctags downlaoded')
            
        except:
            print("nothing worked")


    # os walk
    # write to contents file
    # remove pyrepo clone



Git_Repo('')